# QuantDB 版本管理指南

版本管理是QuantDB项目的核心内容，本文档提供了项目的版本管理策略、最佳实践和当前状态的概述。

**最后更新**: 2025-06-17

## 目录

1. [版本管理策略](#版本管理策略)
2. [分支策略](#分支策略)
3. [版本号规范](#版本号规范)
4. [标签管理](#标签管理)
5. [提交消息规范](#提交消息规范)
6. [合并请求流程](#合并请求流程)
7. [版本发布流程](#版本发布流程)
8. [当前版本状态](#当前版本状态)
9. [版本历史](#版本历史)

## 版本管理策略

QuantDB项目采用Git作为版本控制系统，遵循以下核心原则：

1. **可追溯性**：每个代码更改都应该可以追溯到其来源、目的和相关需求
2. **稳定性**：主分支应始终保持稳定可发布状态
3. **隔离性**：使用特性分支隔离开发工作，避免影响主分支
4. **可审核性**：通过合并请求进行代码审查，确保代码质量
5. **语义化版本**：采用语义化版本控制，清晰地传达版本变更的性质

## 分支策略

QuantDB项目采用以下分支策略：

### 长期分支

- **main**：主分支，始终保持稳定可发布状态
- **develop**：开发分支，集成已完成的特性，准备下一个版本发布

### 临时分支

- **feature/xxx**：特性分支，用于开发新功能
- **sprint/x.x**：冲刺分支，用于特定冲刺周期的开发工作
- **bugfix/xxx**：错误修复分支，用于修复非紧急bug
- **hotfix/xxx**：热修复分支，用于修复生产环境中的紧急问题
- **release/x.x.x**：发布分支，用于准备特定版本的发布

## 版本号规范

QuantDB项目采用[语义化版本控制](https://semver.org/)，版本号格式为：`主版本.次版本.修订版本[-预发布标识]`

1. **主版本（Major）**：当进行不兼容的API更改时增加
2. **次版本（Minor）**：当添加向后兼容的功能时增加
3. **修订版本（Patch）**：当进行向后兼容的错误修复时增加
4. **预发布标识**：如alpha、beta、rc等，表示预发布版本

### 冲刺版本标识

对于冲刺开发，我们使用以下格式：`x.y.z-sprintN`，例如：`v0.2.5-sprint2.5`

## 标签管理

每个正式发布的版本都应创建Git标签，标签命名遵循版本号规范：

```bash
# 创建带注释的标签
git tag -a v1.0.0 -m "Version 1.0.0: Initial stable release"

# 推送标签到远程仓库
git push origin v1.0.0
```

标签应该是带注释的（annotated），包含版本的简要描述。

## 提交消息规范

提交消息应清晰、描述性，遵循以下格式：

```
Sprint X: 简短描述（不超过50个字符）

详细描述（可选，每行不超过72个字符）
- 更改点1
- 更改点2

相关问题：#123, #456
```

例如：

```
Sprint 2.5: 实现测试驱动开发流程和缓存系统

- 添加测试运行脚本和测试覆盖率报告
- 实现缓存系统核心组件
- 修复已知的弃用警告

相关问题：#42, #57
```

## 合并请求流程

1. **创建特性分支**：从最新的主分支创建特性分支
2. **开发功能**：在特性分支上进行开发
3. **提交更改**：使用规范的提交消息提交更改
4. **推送分支**：将特性分支推送到远程仓库
5. **创建合并请求**：创建将特性分支合并到主分支的合并请求
6. **代码审查**：至少一名团队成员进行代码审查
7. **自动化测试**：确保所有自动化测试通过
8. **解决反馈**：根据审查反馈进行必要的修改
9. **合并**：审查通过后合并到主分支
10. **删除分支**：合并后删除特性分支

## 版本发布流程

1. **准备发布**：从develop分支创建release分支
2. **版本调整**：更新版本号和文档
3. **测试验证**：进行最终测试和验证
4. **创建合并请求**：创建将release分支合并到main分支的合并请求
5. **代码审查**：进行最终代码审查
6. **合并到主分支**：审查通过后合并到main分支
7. **创建标签**：为发布版本创建标签
8. **合并回develop**：将release分支合并回develop分支
9. **清理**：删除release分支

## 当前版本状态

截至最新更新（2025年6月），QuantDB项目的版本状态如下：

- **当前开发分支**：`sprint3-api-enhancement`
- **最新版本标签**：`v0.4.0`
- **开发阶段**：Sprint 3 - API增强与文档，准备MVP发布
- **下一步计划**：
  1. 完成Sprint 3的核心任务
  2. 创建`release/v0.5.0`分支
  3. 部署MVP版本到公网环境

### 最近的提交

最近的重要提交包括：

- Sprint 3: 创建MVP发布计划，准备最小可发布版本
- Sprint 2.6: 简化缓存架构，优化数据获取策略
- Sprint 2.5: 实现测试驱动开发流程和缓存系统
- Sprint 2: 实现数据服务和API端点
- Sprint 1: 添加文档标准和项目管理README

## 版本历史

QuantDB项目的版本历史如下：

| 版本标签 | 发布日期 | 描述 |
|---------|---------|-----|
| v0.5.0-pre | 2025-06-17 | 准备MVP发布 |
| v0.4.0 | 2025-06-16 | 完成Sprint 2.6，简化缓存架构 |
| v0.3.0 | 2025-05-15 | 完成Sprint 2.5，缓存系统优化 |
| v0.2.5-sprint2.5 | 2025-05-14 | 测试驱动开发和缓存系统实现 |
| v0.2.0-sprint2 | 2025-05-14 | 实现数据服务和API端点 |
| v0.1.0-sprint1 | 2025-05-14 | 添加文档标准和项目管理README |
| v0.1.0 | 2025-05-13 | 初始版本 |

## 版本管理最佳实践

1. **定期提交**：小而频繁的提交比大而不频繁的提交更好
2. **不提交生成的文件**：确保.gitignore正确配置，不提交生成的文件
3. **保护主分支**：设置分支保护规则，要求代码审查和测试通过
4. **使用拉取请求**：即使是单人项目，也使用拉取请求进行自我审查
5. **保持分支最新**：定期将主分支合并到特性分支，避免合并冲突
6. **清晰的提交消息**：提交消息应清晰描述更改的内容和原因
7. **使用问题跟踪**：将提交与问题跟踪系统关联
8. **版本标签**：为每个发布版本创建标签
9. **遵循工作流程**：团队应该一致地遵循约定的工作流程

---

本文档将随着项目的发展而更新，确保它始终反映项目的当前版本管理状态和最佳实践。
