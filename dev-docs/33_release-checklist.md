# 版本发布检查清单

## 🎯 发布前检查 (Pre-Release)

### 📋 代码质量检查
- [ ] **代码审查完成**: 所有PR已审查并合并
- [ ] **分支同步**: develop分支与main分支同步
- [ ] **工作目录清洁**: `git status` 显示无未提交更改
- [ ] **依赖更新**: 检查并更新过期依赖
- [ ] **代码格式**: 运行代码格式化工具
- [ ] **静态分析**: 运行linting工具检查

### 🧪 测试验证
- [ ] **单元测试**: `python scripts/test_runner.py --unit` 通过
- [ ] **集成测试**: `python scripts/test_runner.py --integration` 通过
- [ ] **API测试**: `python scripts/test_runner.py --api` 通过
- [ ] **E2E测试**: `python scripts/test_runner.py --e2e` 通过
- [ ] **性能测试**: `python scripts/test_runner.py --performance` 通过
- [ ] **覆盖率检查**: 核心模块覆盖率 > 80%
- [ ] **回归测试**: 验证关键功能未受影响

### 🚀 功能验证
- [ ] **API健康检查**: `/api/v1/health` 响应正常
- [ ] **核心功能**: 股票数据查询功能正常
- [ ] **缓存系统**: 缓存命中率和性能正常
- [ ] **资产信息**: 真实公司名称显示正确
- [ ] **前端界面**: 所有页面加载和功能正常
- [ ] **云端版本**: Streamlit Cloud版本功能完整

### 📚 文档更新
- [ ] **CHANGELOG.md**: 添加新版本更新日志
- [ ] **README.md**: 更新版本号和功能描述
- [ ] **API文档**: 同步API变更
- [ ] **架构文档**: 反映架构变更
- [ ] **部署文档**: 更新部署指南
- [ ] **用户文档**: 更新使用说明

## 🏷️ 版本标记 (Tagging)

### 📝 版本号规范
- [ ] **语义化版本**: 遵循 `v{主版本}.{次版本}.{修订版本}[-标识符]` 格式
- [ ] **版本递增**: 正确递增版本号
- [ ] **标识符使用**: 合理使用 alpha/beta/rc/hotfix 等标识符
- [ ] **向后兼容**: 主版本号变更时确认破坏性变更

### 🔖 标签创建
```bash
# 检查清单
- [ ] 切换到正确分支: `git checkout main`
- [ ] 拉取最新代码: `git pull origin main`
- [ ] 创建标签: `git tag -a v{版本号} -m "发布说明"`
- [ ] 推送标签: `git push origin v{版本号}`
- [ ] 验证标签: 在GitHub上确认标签存在
```

### 📋 标签信息
- [ ] **标签名称**: 清晰的版本号
- [ ] **标签消息**: 包含核心成就和技术亮点
- [ ] **提交关联**: 标签指向正确的提交
- [ ] **分支关联**: 标签在正确的分支上

## 📦 发布创建 (Release)

### 🎯 GitHub Release
- [ ] **基于标签**: 基于正确的版本标签创建
- [ ] **发布标题**: 清晰描述版本特性
- [ ] **发布说明**: 包含完整的更新内容
- [ ] **分类整理**: 按功能、修复、改进分类
- [ ] **技术指标**: 包含测试覆盖率、性能数据
- [ ] **升级指南**: 提供详细的升级步骤
- [ ] **已知问题**: 列出当前已知问题
- [ ] **下一步计划**: 说明后续版本规划

### 📎 发布资产
- [ ] **源代码**: 自动包含源代码压缩包
- [ ] **文档**: 附加重要文档文件
- [ ] **部署脚本**: 包含部署相关脚本
- [ ] **配置示例**: 提供配置文件示例

## 🚀 发布后验证 (Post-Release)

### ✅ 部署验证
- [ ] **本地部署**: 验证本地部署流程
- [ ] **云端部署**: 验证Streamlit Cloud部署
- [ ] **API可用性**: 确认所有API端点正常
- [ ] **性能基准**: 验证性能指标未退化
- [ ] **监控检查**: 确认监控系统正常工作

### 📢 发布通知
- [ ] **团队通知**: 通知开发团队发布完成
- [ ] **用户通知**: 更新用户文档和通知
- [ ] **社区通知**: 在相关社区发布更新
- [ ] **文档同步**: 确保所有文档平台同步

### 🔄 后续工作
- [ ] **分支清理**: 删除已合并的功能分支
- [ ] **里程碑关闭**: 关闭GitHub里程碑
- [ ] **问题跟踪**: 跟踪发布后的问题反馈
- [ ] **性能监控**: 监控发布后的系统性能
- [ ] **用户反馈**: 收集和处理用户反馈

## 🚨 紧急修复流程 (Hotfix)

### 🔥 紧急情况
- [ ] **问题确认**: 确认问题的严重性和影响范围
- [ ] **创建hotfix分支**: `git checkout -b hotfix/问题描述`
- [ ] **快速修复**: 最小化修改，专注解决问题
- [ ] **测试验证**: 运行相关测试确保修复有效
- [ ] **代码审查**: 快速但必要的代码审查

### 🏃‍♂️ 快速发布
- [ ] **合并到main**: 将hotfix合并到main分支
- [ ] **创建标签**: 创建hotfix版本标签 (如v2.0.1)
- [ ] **发布说明**: 简洁的hotfix发布说明
- [ ] **部署验证**: 快速验证修复效果
- [ ] **合并到develop**: 将修复同步到develop分支

## 📊 发布质量指标

### 🎯 质量门槛
- **测试通过率**: ≥ 90%
- **代码覆盖率**: 核心模块 ≥ 80%
- **性能基准**: 无显著退化
- **文档完整性**: 100%
- **安全检查**: 无高危漏洞

### 📈 成功指标
- **部署成功率**: 100%
- **回滚次数**: 0
- **用户反馈**: 正面
- **系统稳定性**: 无重大故障
- **功能可用性**: 100%

## 🛠️ 工具和脚本

### 📋 自动化脚本
```bash
# 发布准备脚本
./scripts/prepare_release.sh v2.1.0

# 测试运行脚本  
./scripts/test_runner.py --all --coverage

# 部署验证脚本
./scripts/verify_deployment.sh

# 发布后检查脚本
./scripts/post_release_check.sh
```

### 🔧 推荐工具
- **版本管理**: git + GitHub
- **测试工具**: pytest + coverage
- **文档工具**: markdown + GitHub Pages
- **监控工具**: 自定义监控脚本
- **部署工具**: Streamlit Cloud

## 📝 模板和示例

### 🏷️ 标签消息模板
```
v{版本号} - {版本描述}

核心成就:
- ✅ {主要功能1}
- ✅ {主要功能2}
- ✅ {主要功能3}

技术亮点:
- 🏗️ {技术改进1}
- ⚡ {性能优化}
- 🧪 {测试覆盖}

项目状态: {状态} | 评分: {评分}/10 | 风险等级: {风险等级}
```

### 📦 发布说明模板
参考 `v2.0.0-streamlit-cloud` 发布说明的结构和格式。

---

**使用说明**: 每次发布前，复制此检查清单并逐项确认完成。保持敏捷，但不跳过关键步骤。
