# QuantDB äº‘ç‰ˆæœ¬å¹³å°æŒ‡å—

**ç‰ˆæœ¬**: v2.1.0 | **çŠ¶æ€**: é‡Œç¨‹ç¢‘2 | **æ›´æ–°**: 2025-08-04

## ğŸ¯ äº‘ç‰ˆæœ¬ä»·å€¼å®šä½

QuantDB äº‘ç‰ˆæœ¬æ˜¯åŸºäºAPIæœåŠ¡æ„å»ºçš„**å®Œæ•´é‡åŒ–æ•°æ®å¹³å°**ï¼Œæä¾›å¯è§†åŒ–ç•Œé¢å’Œäº‘ç«¯éƒ¨ç½²è§£å†³æ–¹æ¡ˆï¼Œè®©éæŠ€æœ¯ç”¨æˆ·ä¹Ÿèƒ½è½»æ¾ä½¿ç”¨é«˜æ€§èƒ½è‚¡ç¥¨æ•°æ®æœåŠ¡ã€‚

### â˜ï¸ æ ¸å¿ƒä¼˜åŠ¿
- **é›¶é—¨æ§›ä½¿ç”¨**: æ— éœ€ç¼–ç¨‹çŸ¥è¯†ï¼ŒWebç•Œé¢ç›´æ¥æ“ä½œ
- **æ•°æ®å¯è§†åŒ–**: ä¸“ä¸šå›¾è¡¨å±•ç¤ºï¼Œæ”¯æŒå¤šç§æŠ€æœ¯æŒ‡æ ‡
- **å®æ—¶ç›‘æ§**: ç³»ç»Ÿæ€§èƒ½å’Œæ•°æ®è¦†ç›–å®æ—¶è·Ÿè¸ª
- **äº‘ç«¯éƒ¨ç½²**: Streamlit Cloudä¸€é”®éƒ¨ç½²ï¼Œå…¨çƒè®¿é—®
- **å®Œæ•´é›†æˆ**: ç›´æ¥ä½¿ç”¨åç«¯APIæœåŠ¡ï¼Œæ•°æ®ä¸€è‡´æ€§ä¿è¯

## ğŸ“¦ äº‘ç‰ˆæœ¬æ¶æ„

### æŠ€æœ¯æ ˆ
```
Frontend Layer (Streamlit)
â”œâ”€â”€ å¤šé¡µé¢åº”ç”¨æ¶æ„
â”œâ”€â”€ Plotlyäº¤äº’å¼å›¾è¡¨
â”œâ”€â”€ å®æ—¶æ•°æ®å±•ç¤º
â””â”€â”€ å“åº”å¼è®¾è®¡

Integration Layer
â”œâ”€â”€ APIå®¢æˆ·ç«¯å°è£…
â”œâ”€â”€ æ•°æ®ç¼“å­˜ç®¡ç†
â”œâ”€â”€ é”™è¯¯å¤„ç†æœºåˆ¶
â””â”€â”€ æ€§èƒ½ä¼˜åŒ–

Backend Layer (å¤ç”¨APIæœåŠ¡)
â”œâ”€â”€ core/ - ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ api/ - RESTfulæ¥å£
â”œâ”€â”€ database/ - æ•°æ®å­˜å‚¨
â””â”€â”€ cache/ - æ™ºèƒ½ç¼“å­˜
```

### éƒ¨ç½²æ¨¡å¼å¯¹æ¯”
| ç‰¹æ€§ | æœ¬åœ°æ¨¡å¼ | äº‘ç«¯æ¨¡å¼ |
|------|----------|----------|
| **éƒ¨ç½²æ–¹å¼** | æœ¬åœ°Streamlit | Streamlit Cloud |
| **æ•°æ®æº** | è°ƒç”¨æœ¬åœ°API | é›†æˆåç«¯æœåŠ¡ |
| **è®¿é—®æ–¹å¼** | localhost:8501 | å…¬ç½‘URL |
| **ç”¨æˆ·ç¾¤ä½“** | å¼€å‘è€…ã€å†…éƒ¨ä½¿ç”¨ | å…¬ä¼—ç”¨æˆ· |
| **ç»´æŠ¤æˆæœ¬** | éœ€è¦æœ¬åœ°ç»´æŠ¤ | äº‘ç«¯è‡ªåŠ¨ç»´æŠ¤ |

## ğŸš€ åŠŸèƒ½æ¨¡å—

### 1. è‚¡ç¥¨æ•°æ®æŸ¥è¯¢ (Stock_Data.py)
```python
# æ ¸å¿ƒåŠŸèƒ½
- è‚¡ç¥¨ä»£ç æœç´¢å’ŒéªŒè¯
- å†å²æ•°æ®æŸ¥è¯¢ (æ”¯æŒæ—¥æœŸèŒƒå›´)
- æ•°æ®è¡¨æ ¼å±•ç¤ºå’Œä¸‹è½½
- Kçº¿å›¾å’ŒæŠ€æœ¯æŒ‡æ ‡å›¾è¡¨
- Aè‚¡+æ¸¯è‚¡ç»Ÿä¸€æŸ¥è¯¢ç•Œé¢
```

**ç”¨æˆ·ä½“éªŒæµç¨‹**:
1. è¾“å…¥è‚¡ç¥¨ä»£ç  (å¦‚: 600000, 00700)
2. é€‰æ‹©æŸ¥è¯¢æ—¥æœŸèŒƒå›´
3. å®æ—¶å±•ç¤ºæ•°æ®è¡¨æ ¼
4. äº¤äº’å¼å›¾è¡¨åˆ†æ
5. ä¸€é”®å¯¼å‡ºCSV/Excel

### 2. èµ„äº§ä¿¡æ¯ç®¡ç† (Asset_Info.py)
```python
# æ ¸å¿ƒåŠŸèƒ½
- å…¬å¸åŸºæœ¬ä¿¡æ¯å±•ç¤º
- è´¢åŠ¡æŒ‡æ ‡å¯è§†åŒ– (PE, PB, ROE)
- è¡Œä¸šåˆ†ç±»å’Œæ¦‚å¿µæ ‡ç­¾
- å¸‚å€¼å’Œè‚¡æœ¬ä¿¡æ¯
- èµ„äº§ä¿¡æ¯å®æ—¶æ›´æ–°
```

**å±•ç¤ºå†…å®¹**:
- çœŸå®å…¬å¸åç§° (å¦‚: "æµ¦å‘é“¶è¡Œ", "è…¾è®¯æ§è‚¡")
- å…³é”®è´¢åŠ¡æŒ‡æ ‡è¶‹åŠ¿å›¾
- è¡Œä¸šå¯¹æ¯”åˆ†æ
- æŠ•èµ„ä»·å€¼è¯„ä¼°

### 3. æ€§èƒ½ç›‘æ§ (Performance.py)
```python
# æ ¸å¿ƒåŠŸèƒ½
- APIå“åº”æ—¶é—´ç›‘æ§
- ç¼“å­˜å‘½ä¸­ç‡ç»Ÿè®¡
- æ€§èƒ½å¯¹æ¯”å›¾è¡¨ (vs AKShare)
- ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
- å®æ—¶æ€§èƒ½æµ‹è¯•
```

**ç›‘æ§æŒ‡æ ‡**:
- å¹³å‡å“åº”æ—¶é—´: ~18ms
- ç¼“å­˜å‘½ä¸­ç‡: >90%
- æ€§èƒ½æå‡: 98.1%
- æ—¥è¯·æ±‚é‡ç»Ÿè®¡

### 4. ç³»ç»ŸçŠ¶æ€ (System_Status.py)
```python
# æ ¸å¿ƒåŠŸèƒ½
- æ•°æ®åº“è¿æ¥çŠ¶æ€
- ç¼“å­˜ç³»ç»Ÿå¥åº·æ£€æŸ¥
- æ•°æ®è¦†ç›–ç»Ÿè®¡
- é”™è¯¯æ—¥å¿—ç›‘æ§
- ç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯
```

**çŠ¶æ€å±•ç¤º**:
- ğŸŸ¢ ç³»ç»Ÿæ­£å¸¸è¿è¡Œ
- ğŸ“Š æ•°æ®è¦†ç›–: Xåªè‚¡ç¥¨, Yæ¡è®°å½•
- âš¡ ç¼“å­˜çŠ¶æ€: å¥åº·
- ğŸ”„ æœ€åæ›´æ–°: å®æ—¶

## ğŸ¨ ç”¨æˆ·ç•Œé¢è®¾è®¡

### ä¸»é¡µå¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    QuantDB é‡åŒ–æ•°æ®å¹³å°                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š è‚¡ç¥¨æ•°æ®  â”‚  ğŸ¢ èµ„äº§ä¿¡æ¯  â”‚  âš¡ æ€§èƒ½ç›‘æ§  â”‚  ğŸ”§ ç³»ç»ŸçŠ¶æ€  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  [è‚¡ç¥¨ä»£ç è¾“å…¥æ¡†]  [æ—¥æœŸé€‰æ‹©å™¨]  [æŸ¥è¯¢æŒ‰é’®]                â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   æ•°æ®è¡¨æ ¼       â”‚  â”‚   Kçº¿å›¾è¡¨        â”‚              â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                         â”‚
â”‚  [ä¸‹è½½æŒ‰é’®]  [åˆ†äº«é“¾æ¥]  [æ·»åŠ åˆ°è‡ªé€‰]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å“åº”å¼è®¾è®¡
- **æ¡Œé¢ç«¯**: å¤šåˆ—å¸ƒå±€ï¼Œå®Œæ•´åŠŸèƒ½å±•ç¤º
- **å¹³æ¿ç«¯**: è‡ªé€‚åº”å¸ƒå±€ï¼Œä¿æŒæ ¸å¿ƒåŠŸèƒ½
- **ç§»åŠ¨ç«¯**: å•åˆ—å¸ƒå±€ï¼Œç®€åŒ–æ“ä½œæµç¨‹

## ğŸ”§ æŠ€æœ¯å®ç°

### å‰ç«¯ç»„ä»¶åŒ–
```python
# components/stock_chart.py
def create_candlestick_chart(data):
    """åˆ›å»ºKçº¿å›¾ç»„ä»¶"""
    fig = go.Figure(data=[go.Candlestick(
        x=data['date'],
        open=data['open'],
        high=data['high'],
        low=data['low'],
        close=data['close']
    )])
    return fig

# components/performance_metrics.py
def display_performance_metrics():
    """å±•ç¤ºæ€§èƒ½æŒ‡æ ‡ç»„ä»¶"""
    col1, col2, col3 = st.columns(3)
    with col1:
        st.metric("å“åº”æ—¶é—´", "18ms", "-98.1%")
    with col2:
        st.metric("ç¼“å­˜å‘½ä¸­ç‡", "95%", "+5%")
    with col3:
        st.metric("æ—¥è¯·æ±‚é‡", "1,234", "+12%")
```

### æ•°æ®æµç®¡ç†
```python
# æ•°æ®è·å–æµç¨‹
@st.cache_data(ttl=300)  # 5åˆ†é’Ÿç¼“å­˜
def fetch_stock_data(symbol, start_date, end_date):
    """è·å–è‚¡ç¥¨æ•°æ®ï¼Œå¸¦å‰ç«¯ç¼“å­˜"""
    try:
        # è°ƒç”¨åç«¯API
        response = requests.get(
            f"{API_BASE_URL}/api/v1/historical/stock/{symbol}",
            params={"start_date": start_date, "end_date": end_date}
        )
        return response.json()
    except Exception as e:
        st.error(f"æ•°æ®è·å–å¤±è´¥: {e}")
        return None
```

### é”™è¯¯å¤„ç†
```python
# ç»Ÿä¸€é”™è¯¯å¤„ç†
def handle_api_error(response):
    """å¤„ç†APIé”™è¯¯å“åº”"""
    if response.status_code == 404:
        st.warning("è‚¡ç¥¨ä»£ç ä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥è¾“å…¥")
    elif response.status_code == 500:
        st.error("æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•")
    else:
        st.error(f"è¯·æ±‚å¤±è´¥: {response.status_code}")
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æœ¬åœ°å¼€å‘éƒ¨ç½²
```bash
# 1. å¯åŠ¨åç«¯APIæœåŠ¡
python run_api.py

# 2. å¯åŠ¨å‰ç«¯åº”ç”¨ (æ–°ç»ˆç«¯)
cd quantdb_frontend
streamlit run app.py

# 3. è®¿é—®åº”ç”¨
# http://localhost:8501
```

### Streamlit Cloudéƒ¨ç½²
```bash
# 1. æ¨é€ä»£ç åˆ°GitHub
git push origin main

# 2. åœ¨Streamlit Cloudåˆ›å»ºåº”ç”¨
# - è¿æ¥GitHubä»“åº“
# - é€‰æ‹©cloud/streamlit_cloud/app.py
# - é…ç½®ç¯å¢ƒå˜é‡

# 3. è‡ªåŠ¨éƒ¨ç½²
# https://your-app.streamlit.app
```

### ç¯å¢ƒå˜é‡é…ç½®
```bash
# .streamlit/secrets.toml
[database]
url = "sqlite:///./database/stock_data.db"

[api]
base_url = "http://localhost:8000"
timeout = 30

[cache]
ttl = 300
max_size = 1000
```

## ğŸ“Š ç”¨æˆ·åˆ†æ

### ç›®æ ‡ç”¨æˆ·ç¾¤ä½“

#### 1. ä¸ªäººæŠ•èµ„è€…
**éœ€æ±‚**: ç®€å•æ˜“ç”¨çš„è‚¡ç¥¨æŸ¥è¯¢å·¥å…·
**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹æŒä»“è‚¡ç¥¨çš„å†å²è¡¨ç°
- åˆ†æè‚¡ç¥¨æŠ€æœ¯æŒ‡æ ‡
- å¯¹æ¯”ä¸åŒè‚¡ç¥¨çš„è¡¨ç°

**ä»·å€¼**: é™ä½æŠ•èµ„å†³ç­–é—¨æ§›ï¼Œæä¾›ä¸“ä¸šæ•°æ®æ”¯æŒ

#### 2. é‡‘èä»ä¸šè€…
**éœ€æ±‚**: ä¸“ä¸šçš„æ•°æ®åˆ†æå·¥å…·
**ä½¿ç”¨åœºæ™¯**:
- å®¢æˆ·æœåŠ¡ä¸­çš„æ•°æ®å±•ç¤º
- æŠ•èµ„å»ºè®®çš„æ•°æ®æ”¯æ’‘
- å¸‚åœºåˆ†æå’ŒæŠ¥å‘Šåˆ¶ä½œ

**ä»·å€¼**: æé«˜å·¥ä½œæ•ˆç‡ï¼Œå¢å¼ºä¸“ä¸šå½¢è±¡

#### 3. æ•™è‚²æœºæ„
**éœ€æ±‚**: æ•™å­¦å’Œç ”ç©¶ç”¨çš„æ•°æ®å¹³å°
**ä½¿ç”¨åœºæ™¯**:
- é‡‘èè¯¾ç¨‹çš„æ¡ˆä¾‹åˆ†æ
- å­¦ç”Ÿå®ä¹ å’Œé¡¹ç›®å®è·µ
- å­¦æœ¯ç ”ç©¶çš„æ•°æ®æ¥æº

**ä»·å€¼**: æä¾›çœŸå®æ•°æ®ç¯å¢ƒï¼Œå¢å¼ºæ•™å­¦æ•ˆæœ

#### 4. ä¼ä¸šç”¨æˆ·
**éœ€æ±‚**: å†…éƒ¨æ•°æ®åˆ†æå’Œå†³ç­–æ”¯æŒ
**ä½¿ç”¨åœºæ™¯**:
- æŠ•èµ„éƒ¨é—¨çš„æ•°æ®åˆ†æ
- é£é™©ç®¡ç†çš„æ•°æ®ç›‘æ§
- ä¸šåŠ¡å†³ç­–çš„æ•°æ®æ”¯æ’‘

**ä»·å€¼**: é™ä½æ•°æ®è·å–æˆæœ¬ï¼Œæé«˜å†³ç­–è´¨é‡

## ğŸ”„ è¿­ä»£è®¡åˆ’

### Phase 1: åŸºç¡€åŠŸèƒ½ (é‡Œç¨‹ç¢‘2.1)
- [x] è‚¡ç¥¨æ•°æ®æŸ¥è¯¢ç•Œé¢
- [x] åŸºç¡€å›¾è¡¨å±•ç¤º
- [x] ç³»ç»ŸçŠ¶æ€ç›‘æ§
- [ ] ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### Phase 2: å¢å¼ºåŠŸèƒ½ (é‡Œç¨‹ç¢‘2.2)
- [ ] æŠ€æœ¯æŒ‡æ ‡è®¡ç®—å’Œå±•ç¤º
- [ ] å¤šè‚¡ç¥¨å¯¹æ¯”åˆ†æ
- [ ] è‡ªé€‰è‚¡ç®¡ç†åŠŸèƒ½
- [ ] æ•°æ®å¯¼å‡ºå’Œåˆ†äº«

### Phase 3: é«˜çº§åŠŸèƒ½ (é‡Œç¨‹ç¢‘2.3)
- [ ] ç”¨æˆ·è´¦æˆ·ç³»ç»Ÿ
- [ ] ä¸ªæ€§åŒ–è®¾ç½®
- [ ] ç§»åŠ¨ç«¯ä¼˜åŒ–
- [ ] å®æ—¶æ•°æ®æ¨é€

## ğŸ“ˆ æˆåŠŸæŒ‡æ ‡

### æŠ€æœ¯æŒ‡æ ‡
- é¡µé¢åŠ è½½æ—¶é—´ < 3ç§’
- ç³»ç»Ÿå¯ç”¨æ€§ > 99%
- ç”¨æˆ·ç•Œé¢å“åº”æ€§ä¼˜ç§€
- ç§»åŠ¨ç«¯å…¼å®¹æ€§è‰¯å¥½

### ç”¨æˆ·æŒ‡æ ‡
- æœˆæ´»è·ƒç”¨æˆ· > 100
- ç”¨æˆ·æ»¡æ„åº¦ > 4.5/5
- åŠŸèƒ½ä½¿ç”¨ç‡ > 70%
- ç”¨æˆ·ç•™å­˜ç‡ > 60%

### ä¸šåŠ¡æŒ‡æ ‡
- ç”¨æˆ·å¢é•¿ç‡ > 20%/æœˆ
- åŠŸèƒ½ä½¿ç”¨æ·±åº¦æå‡
- ç”¨æˆ·åé¦ˆç§¯ææ€§
- ç¤¾åŒºæ´»è·ƒåº¦å¢é•¿

---

*æœ€åæ›´æ–°: 2025-08-04 | é‡Œç¨‹ç¢‘: 2 | çŠ¶æ€: è§„åˆ’ä¸­*
